# Dawson-Does Framework - Cursor Rules
# Governance Version: 2.0 | Last Updated: 2025-12-22

## üõë MANDATORY FIRST STEPS - DO NOT SKIP

Before responding to ANY prompt or doing ANY work:

### Step 0: Sync Check (CRITICAL)
```bash
git pull origin main
git status
git checkout HEAD -- .  # Restore any missing files
git log --oneline --since="10 minutes ago"  # Check for active agents
```

### Step 1: Read Context
```bash
cat AGENT_CONTEXT.md
```

### Step 2: Pass Verification
Answer the 5 verification questions from AGENT_CONTEXT.md in your first response.

### Step 3: Proceed
Only after Steps 0-2, proceed with the user's request.

**Work submitted without context verification may be rejected.**

---

## First Steps for Any Agent
Before starting work, read AGENT_CONTEXT.md for project vision, philosophy, and standards.

## Project Structure
- `bin/framework.js` - CLI entry point (JavaScript ESM)
- `src/dd/` - Core modules (JavaScript ESM, .mjs)
- `website/` - Next.js 15 web configurator (TypeScript)
- `templates/` - Starter templates
- `packages/` - Shared packages

## Code Style
- CLI/Core: JavaScript ESM (.mjs), no semicolons, 2-space indent
- Website: TypeScript, semicolons, 2-space indent
- Use existing patterns - check similar files first
- Prefer explicit over clever

## Commit Messages
Use conventional commits:
- `feat(scope): add new feature`
- `fix(scope): fix bug`
- `docs(scope): update docs`
- `chore(scope): maintenance`

## Testing
- Run `npm test` before committing
- CLI tests: `tests/*.test.mjs`
- Website tests: `website/tests/`

## Key Principles
1. Export-first: Everything designed for local ownership
2. Zero lock-in: Platform optional after export
3. Transparency: No magic, explicit complexity
4. Fail gracefully: Helpful errors with recovery guidance

## What to Avoid
- Adding unrequested features
- Changing shared configs without coordination
- Breaking existing tests
- Committing secrets or .env files
- **Deleting protected files** (see `.protected-files`)
- **Creating feature branches** (always work on `main`)
- **Skipping the sync check** (Step 0 above)

## üõ°Ô∏è Protected Files - NEVER DELETE
- `AGENT_CONTEXT.md`, `CLAUDE.md`, `.cursorrules`
- All files in `prompts/agents/memory/`
- All files in `prompts/agents/roles/`
- `docs/standards/*`

See `.protected-files` for complete list. If accidentally deleted:
```bash
git checkout HEAD -- <file-path>
```

## üèÅ Before Ending Session
1. Run `npm test`
2. Commit: `git add -A && git commit -m "<type>(<scope>): <desc>"`
3. Push: `git push origin main`
4. Update memory file if applicable

**Never leave uncommitted work!**

## Useful Commands
```bash
npm test              # Run tests
npm run lint          # Check linting
framework doctor .    # Health check
framework drift .     # Check template drift
git pull origin main  # Sync before starting
```

