Next Agent: Platform Agent

Confirm you are the Platform Agent.

---

# Task: AI-Powered Configuration Suggester

## Priority: P1
## Estimated Time: 3-4 hours
## Dependencies: None

---

## Context

Users often don't know what features they need or how to configure their project. Currently they must fill out many fields manually. We want AI to analyze a brief description and suggest optimal configuration.

**Goal**: User provides 1-2 sentences → AI returns complete configuration suggestions with confidence scores.

---

## Requirements

### 1. Suggestion API Endpoint

**File**: `website/app/api/suggest-config/route.ts`

```typescript
// POST /api/suggest-config
interface SuggestConfigRequest {
  description: string;           // Brief user description (required)
  context?: {
    budget?: 'low' | 'medium' | 'high';
    timeline?: 'fast' | 'normal' | 'flexible';
    technicalSkill?: 'beginner' | 'intermediate' | 'advanced';
  };
}

interface SuggestConfigResponse {
  success: boolean;
  suggestions: ConfigSuggestions;
  questionsToAsk: string[];      // Follow-up questions for clarification
  processingTime: number;
}
```

### 2. Configuration Suggestions Schema

```typescript
interface ConfigSuggestions {
  // Target Audience
  audience: {
    primary: string;
    secondary?: string;
    painPoints: string[];
    goals: string[];
    confidence: number;          // 0-1
    reasoning: string;
  };
  
  // Design Preferences
  design: {
    aesthetic: 'minimal' | 'bold' | 'playful' | 'luxurious' | 'corporate' | 'technical';
    colorMode: 'dark' | 'light' | 'system';
    suggestedPrimaryColor: string;  // Hex
    typography: 'modern' | 'classic' | 'geometric' | 'humanist';
    imagery: 'photography' | 'illustrations' | '3d' | 'abstract' | 'none';
    confidence: number;
    reasoning: string;
  };
  
  // Features
  features: {
    required: string[];          // Must have
    niceToHave: string[];        // If easy
    excluded: string[];          // Definitely not
    confidence: number;
    reasoning: string;
  };
  
  // Monetization
  monetization: {
    model: 'freemium' | 'subscription' | 'one-time' | 'marketplace' | 'free' | 'advertising';
    suggestedTiers: number;      // 1-4
    priceRange?: { low: number; high: number };
    confidence: number;
    reasoning: string;
  };
  
  // Pages
  pages: {
    required: string[];          // ['home', 'pricing', 'about']
    optional: string[];          // ['blog', 'faq']
    confidence: number;
    reasoning: string;
  };
  
  // Template
  template: {
    recommended: string;         // 'saas', 'ecommerce', etc.
    alternatives: string[];
    confidence: number;
    reasoning: string;
  };
  
  // Inspiration
  inspiration: {
    suggestedUrls: string[];     // Similar successful products
    industry: string;
    competitors: string[];
    confidence: number;
    reasoning: string;
  };
  
  // Integrations
  integrations: {
    recommended: Record<string, string>;  // { payments: 'stripe', auth: 'clerk' }
    optional: string[];
    confidence: number;
    reasoning: string;
  };
  
  // Overall
  overallConfidence: number;     // 0-1 weighted average
  summary: string;               // 2-3 sentence summary
}
```

### 3. AI Prompt Builder

**File**: `website/lib/ai/config-suggester.ts`

```typescript
export async function suggestConfiguration(
  description: string,
  context?: SuggestConfigRequest['context']
): Promise<ConfigSuggestions> {
  // Build prompt with structured output requirements
  // Use Claude Sonnet for best quality
  // Parse JSON response
  // Validate and sanitize
}
```

**Prompt Template**:
```
You are a product strategy expert analyzing a brief description to suggest optimal web application configuration.

## User Description
{{description}}

## Context
- Budget: {{budget}}
- Timeline: {{timeline}}
- Technical Skill: {{technicalSkill}}

## Your Task
Analyze this description and provide comprehensive configuration suggestions.

For each category:
1. Provide your recommendation
2. Explain your reasoning (1 sentence)
3. Rate your confidence (0-1)

## Output Format
Return valid JSON matching this exact schema:
{
  "audience": { ... },
  "design": { ... },
  "features": { ... },
  "monetization": { ... },
  "pages": { ... },
  "template": { ... },
  "inspiration": { ... },
  "integrations": { ... },
  "overallConfidence": 0.85,
  "summary": "..."
}

## Rules
- Be specific, not generic
- Consider the industry norms
- Features should match the product type
- Inspiration URLs should be real, successful products
- If unsure, lower confidence and note in reasoning
```

### 4. Follow-up Questions Generator

When confidence is low or description is ambiguous, generate clarifying questions:

```typescript
function generateFollowUpQuestions(
  suggestions: ConfigSuggestions,
  description: string
): string[] {
  const questions: string[] = [];
  
  // Low confidence areas
  if (suggestions.monetization.confidence < 0.7) {
    questions.push("Will users pay per transaction, subscription, or one-time purchase?");
  }
  
  if (suggestions.audience.confidence < 0.7) {
    questions.push("Who is your primary target user? (e.g., small business owners, developers, students)");
  }
  
  // Missing key info
  if (!description.includes('mobile') && !description.includes('desktop')) {
    questions.push("Should this be mobile-first or desktop-first?");
  }
  
  // Return top 3 most important
  return questions.slice(0, 3);
}
```

---

## UI Integration

### File: `website/app/components/configurator/AIConfigHelper.tsx`

```tsx
"use client";

export function AIConfigHelper({ onApplySuggestions }: Props) {
  const [description, setDescription] = useState("");
  const [suggestions, setSuggestions] = useState<ConfigSuggestions | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  
  const handleSuggest = async () => {
    setIsLoading(true);
    const response = await fetch("/api/suggest-config", {
      method: "POST",
      body: JSON.stringify({ description }),
    });
    const data = await response.json();
    setSuggestions(data.suggestions);
    setIsLoading(false);
  };
  
  return (
    <div className="space-y-4">
      <Textarea 
        placeholder="Describe your project in 1-2 sentences..."
        value={description}
        onChange={(e) => setDescription(e.target.value)}
      />
      
      <Button onClick={handleSuggest} disabled={isLoading}>
        {isLoading ? <Loader2 className="animate-spin" /> : <Wand2 />}
        Let AI Help
      </Button>
      
      {suggestions && (
        <SuggestionCards 
          suggestions={suggestions}
          onAccept={(category) => onApplySuggestions(category, suggestions[category])}
        />
      )}
    </div>
  );
}
```

### SuggestionCards Component

Display suggestions as cards with:
- Accept/Reject buttons per category
- Confidence indicator (high/medium/low)
- Reasoning tooltip
- Edit capability for each suggestion

---

## Testing Requirements

1. **Unit Tests**: `website/__tests__/suggest-config.test.ts`
   - Test prompt building
   - Test response parsing
   - Test validation

2. **Manual Testing**:
   - "A pet costume social network" → Should suggest social features, playful design
   - "Enterprise HR software" → Should suggest corporate aesthetic, subscription model
   - "Online shoe store" → Should suggest ecommerce template, product features

---

## Acceptance Criteria

- [ ] API endpoint returns structured suggestions
- [ ] All suggestion categories have confidence scores
- [ ] Follow-up questions generated for low-confidence areas
- [ ] UI component displays suggestions as cards
- [ ] Accept/reject functionality works
- [ ] Build passes with no errors

---

## Handoff

When complete, create file:
`output/agents/platform/outbox/20260105-ai-config-suggester-complete.md`

Include:
- API endpoint documentation
- Example responses for 3 different use cases
- Integration instructions for Website Agent

