# WYSIWYG Export Architecture Spec

## Current State Gap
The preview and export are NOT synced:
- **Preview**: Uses `ComposedPreview` with AI-composed pattern sections
- **Export**: Uses template-based code generation

Result: Preview !== Exported Code

## Problem Statement
Users see an AI-composed preview with dynamic sections, but the exported 
project uses fixed templates that may not match. This violates WYSIWYG.

## Proposed Architecture

### Option A: Pattern-to-Component Mapping (Recommended)
Each pattern in the registry maps to an exportable React component:

```
Pattern Registry         →    Export Components
hero-split-image         →    components/Hero/SplitImage.tsx
features-icon-grid       →    components/Features/IconGrid.tsx
pricing-tiers            →    components/Pricing/Tiers.tsx
```

**Implementation**:
1. Patterns define `exportComponent` field pointing to component template
2. Export process generates page structure from composition
3. Props from AI composition pass directly to component props
4. Same rendering logic in preview AND export

### Option B: Full Component Generation
AI generates actual React component code for each section:

**Pros**: Maximum flexibility
**Cons**: Harder to test, potential for broken code

### Option C: Snapshot-Based Export
Export includes the composed preview as static HTML + hydration:

**Pros**: Perfect WYSIWYG
**Cons**: Less maintainable exported code

## Recommendation
**Option A** - Pattern-to-Component Mapping provides the best balance:
- Predictable, tested component output
- AI controls composition and props, not raw code
- Easy to add new patterns with matching exports
- Preview and export use same components

## Implementation Steps
1. Add `exportPath` and `componentTemplate` to pattern registry
2. Create export templates for each pattern variant
3. Modify export generator to use composition structure
4. Props from composition become component props in export
5. Test: Compose → Export → Run exported project → Compare to preview

## Priority
P1 - Core to framework value proposition

## Assigned To
Template Agent + Platform Agent collaboration

