# TASK: Add Viewport Switching to Preview Panel

**Priority**: P0
**Wave**: 1 (Parallel)
**Assigned To**: Website Agent
**Estimated Effort**: 2 hours
**Dependencies**: None

---

## Objective

Add desktop/tablet/mobile viewport switching to the preview panel header. Users should be able to see how their site looks at different screen sizes before exporting.

---

## Current State

- Preview panel exists at `website/components/configurator/LivePreviewPanel.tsx`
- DynamicPreviewRenderer already supports `viewport` prop
- No UI to switch between viewports

---

## Implementation

### 1. Update LivePreviewPanel Header

**File**: `website/components/configurator/LivePreviewPanel.tsx`

Add viewport toggle buttons to the header:

```tsx
const [viewport, setViewport] = useState<'desktop' | 'tablet' | 'mobile'>('desktop');

// In header section:
<div className="flex items-center gap-1 bg-slate-800 rounded-lg p-1">
  <button
    onClick={() => setViewport('desktop')}
    className={`p-2 rounded ${viewport === 'desktop' ? 'bg-slate-700' : 'hover:bg-slate-700/50'}`}
    title="Desktop (1280px)"
  >
    <MonitorIcon className="w-4 h-4" />
  </button>
  <button
    onClick={() => setViewport('tablet')}
    className={`p-2 rounded ${viewport === 'tablet' ? 'bg-slate-700' : 'hover:bg-slate-700/50'}`}
    title="Tablet (768px)"
  >
    <TabletIcon className="w-4 h-4" />
  </button>
  <button
    onClick={() => setViewport('mobile')}
    className={`p-2 rounded ${viewport === 'mobile' ? 'bg-slate-700' : 'hover:bg-slate-700/50'}`}
    title="Mobile (375px)"
  >
    <SmartphoneIcon className="w-4 h-4" />
  </button>
</div>
```

### 2. Icon Components

Create simple SVG icons or use existing:

```tsx
function MonitorIcon({ className }: { className?: string }) {
  return (
    <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} 
        d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
    </svg>
  );
}

function TabletIcon({ className }: { className?: string }) {
  return (
    <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}
        d="M12 18h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
    </svg>
  );
}

function SmartphoneIcon({ className }: { className?: string }) {
  return (
    <svg className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2}
        d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
    </svg>
  );
}
```

### 3. Pass Viewport to Renderer

Update the preview renderer call:

```tsx
<DynamicPreviewRenderer
  definition={definition}
  viewport={viewport}
  // ... other props
/>
```

### 4. Viewport Container Styling

The DynamicPreviewRenderer already has viewport sizing, but enhance:

```tsx
// In DynamicPreviewRenderer.tsx - ViewportContainer
const viewportStyles = {
  desktop: { width: '100%' },
  tablet: { 
    width: '768px', 
    margin: '0 auto',
    boxShadow: '0 0 0 1px rgba(255,255,255,0.1), 0 4px 24px rgba(0,0,0,0.5)',
    borderRadius: '12px',
  },
  mobile: { 
    width: '375px', 
    margin: '0 auto',
    boxShadow: '0 0 0 1px rgba(255,255,255,0.1), 0 4px 24px rgba(0,0,0,0.5)',
    borderRadius: '24px',
  },
};
```

### 5. Device Frame (Optional Polish)

Add a device frame around tablet/mobile:

```tsx
{viewport !== 'desktop' && (
  <div className="relative">
    {/* Notch for mobile */}
    {viewport === 'mobile' && (
      <div className="absolute top-2 left-1/2 -translate-x-1/2 w-20 h-6 bg-black rounded-full z-10" />
    )}
    
    <div style={viewportStyles[viewport]} className="overflow-hidden">
      {/* Preview content */}
    </div>
  </div>
)}
```

---

## Viewport Sizes

| Viewport | Width | Common Device |
|----------|-------|---------------|
| Desktop | 100% (or 1280px) | MacBook, iMac |
| Tablet | 768px | iPad |
| Mobile | 375px | iPhone |

---

## Pattern Responsiveness Check

Ensure all patterns handle these breakpoints:

- [ ] HeroCenteredGradient - Text scales, buttons stack on mobile
- [ ] HeroSplitImage - Image stacks below text on mobile
- [ ] FeaturesIconGrid - 1 column on mobile, 2 on tablet, 3 on desktop
- [ ] FeaturesBentoGrid - Single column on mobile
- [ ] TestimonialCards - Single column carousel on mobile
- [ ] PricingTable3Tier - Horizontal scroll or stacked on mobile
- [ ] CTASection - Button full-width on mobile
- [ ] FAQAccordion - Full-width on all sizes

---

## Success Criteria

- [ ] Three viewport buttons visible in preview header
- [ ] Clicking changes preview width with animation
- [ ] Device frame shows for tablet/mobile
- [ ] All patterns remain usable at all sizes
- [ ] Viewport state persists during session
- [ ] Keyboard shortcuts: D for desktop, T for tablet, M for mobile (optional)

---

## Testing

1. Load configurator with preview
2. Click through all three viewport sizes
3. Verify all patterns adapt correctly
4. Check that generated images scale properly
5. Verify touch targets are large enough on mobile

---

*Created by Documentation Agent*

