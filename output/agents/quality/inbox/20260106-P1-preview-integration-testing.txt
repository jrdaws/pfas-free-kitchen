# Task: Preview System Integration Testing
# Priority: P1 (High)
# Agent: Quality Agent
# Estimated: 30 minutes

## Context

Recent changes have been made to the preview system:
1. Theme color consistency (orange #F97316 throughout)
2. Preview header responsive overflow fix
3. Hero component image support
4. Service limit error handling

This task is to verify all systems work together correctly.

## Test Cases

### 1. Theme Consistency Test

Steps:
1. Open http://localhost:3004/configure
2. Enter a domain and run research
3. Click "Compose" to generate preview
4. Observe loading state

Expected:
- Loading spinner should be orange (not indigo or other color)
- "Generate Preview" button should be orange
- All primary accents should be consistent orange theme
- No "flash" of different colors during loading

### 2. Preview Header Responsiveness

Steps:
1. Open preview panel
2. Resize browser window to various widths
3. Check at 450px, 600px, 800px, 1200px widths

Expected:
- Expand/collapse button always visible
- Mode toggle hidden on narrow screens (< 768px)
- Viewport toggle hidden on very narrow (< 640px)
- No button cutoff or overflow issues
- All buttons remain clickable

### 3. Image Generation Flow

Steps:
1. Complete research phase
2. Click "Compose" to generate preview
3. Toggle "AI Images ON"
4. Click "Generate AI Images"
5. Wait for generation to complete

Expected:
- Status shows "X sections need images" initially
- Status updates during generation
- Shows "X images generated" when complete
- Hero section displays background image
- No console errors during generation

### 4. Composer Mode Differences (Known Issue)

Steps:
1. Generate preview with "Pattern Library" mode
2. Note the sections generated
3. Clear and regenerate with "AI Hybrid" mode
4. Clear and regenerate with "Smart Auto" mode

Expected (CURRENTLY FAILING):
- Different modes should produce different layouts
- Pattern Library should be more conservative
- Smart Auto should be more creative

Document: Currently all modes produce similar results - this is a known issue
being addressed in task 20260106-P0-composer-mode-implementation.txt

### 5. Service Limit Error Handling

Steps:
1. If possible, trigger a rate limit (make multiple rapid image requests)
2. Or temporarily set invalid REPLICATE_API_TOKEN
3. Attempt image generation

Expected:
- Clear error message displayed
- Actionable guidance (link to billing page)
- No cryptic error codes
- App remains functional

### 6. Cross-Browser Check

Test in:
- [ ] Chrome
- [ ] Safari
- [ ] Firefox

Check:
- Theme colors render correctly
- Images display properly
- Buttons are clickable
- No layout issues

## Bug Report Format

If issues found, report as:
```
## Bug: [Title]
**Severity**: High/Medium/Low
**Steps to Reproduce**:
1. ...
2. ...

**Expected**: ...
**Actual**: ...
**Screenshot**: (if applicable)
**Browser/Device**: ...
```

## Files to Check

- app/components/configurator/LivePreviewPanel.tsx
- components/preview/Hero.tsx
- components/preview/ComposedPreview.tsx
- app/components/preview/PreviewWithImages.tsx

## Success Criteria

- [ ] All 5 test cases pass (except known mode issue)
- [ ] No console errors during normal operation
- [ ] No visual regressions from previous version
- [ ] All browsers render consistently

## Report Location

Create report at:
output/agents/quality/workspace/preview-integration-report-20260106.md

## Handoff

After testing, if critical bugs found, create P0 bug tickets.
If minor issues, create P2 enhancement tickets.

