TASK: Test Website Analysis Accuracy
PRIORITY: P1 (After Wave 2)
TYPE: Testing / Quality
AGENT: Quality Agent
PARALLEL: No - Wave 3

---

## Objective

Test the website analysis system against known websites to ensure:
1. Structure detection is accurate
2. Feature detection is correct
3. Color extraction is precise
4. Generated preview matches original

---

## Test Cases

### Test Case 1: Simple SaaS Landing Page

**URL**: https://linear.app
**Expected Detection**:
- Structure: Hero (split) → Features (grid) → Testimonials → Pricing → CTA → Footer
- Colors: Purple primary, dark background
- Features: Auth, Dashboard, Pricing
- Components: Pill buttons, elevated cards

### Test Case 2: E-commerce Site

**URL**: https://allbirds.com
**Expected Detection**:
- Structure: Hero (full-width) → Products (grid) → Features → Footer
- Colors: Neutral/earthy palette
- Features: Cart, Products, Categories, Search
- Components: Rounded buttons, product cards with hover

### Test Case 3: Social Platform

**URL**: https://dribbble.com
**Expected Detection**:
- Structure: Nav with search → Grid gallery → Categories
- Colors: Pink primary
- Features: Profiles, Likes, Comments, Search
- Components: Image-heavy cards, like buttons

### Test Case 4: Blog/Content Site

**URL**: https://medium.com
**Expected Detection**:
- Structure: Nav → Featured post → Post grid → Footer
- Colors: Black/white minimal
- Features: Blog, Comments, Profiles, Search, Newsletter
- Components: Clean cards, serif typography

---

## Test Procedure

```typescript
// tests/analysis/accuracy.test.ts

describe('Website Analysis Accuracy', () => {
  const TEST_CASES = [
    {
      url: 'https://linear.app',
      expected: {
        structure: {
          firstSection: 'hero',
          hasPricing: true,
          hasTestimonials: true,
        },
        colors: {
          isDark: true,
          primaryHue: 'purple', // 270-300 range
        },
        features: {
          hasAuth: true,
          hasCart: false,
        },
      },
    },
    // ... more test cases
  ];
  
  for (const testCase of TEST_CASES) {
    it(`correctly analyzes ${testCase.url}`, async () => {
      const analysis = await analyzeWebsite(testCase.url);
      
      // Test structure
      expect(analysis.structure.sections[0].type).toBe(testCase.expected.structure.firstSection);
      
      // Test colors
      const primaryHue = getHue(analysis.visual.colors.primary);
      expect(isInRange(primaryHue, testCase.expected.colors.primaryHue)).toBe(true);
      
      // Test features
      expect(analysis.features.auth.hasLogin).toBe(testCase.expected.features.hasAuth);
    });
  }
});
```

---

## Accuracy Metrics

For each analysis component, track:

### Structure Detection
- Section type accuracy: % of sections correctly identified
- Section order accuracy: % of sections in correct position
- Layout detection accuracy: % of layouts correctly identified

### Color Extraction  
- Primary color match: Delta E < 10 from actual
- Background detection: Light/dark correctly identified
- Palette completeness: 6 colors extracted

### Feature Detection
- True positive rate: Features correctly detected
- False positive rate: Features incorrectly detected
- Coverage: % of actual features detected

### Component Style Detection
- Button style accuracy
- Card style accuracy
- Typography detection accuracy

---

## Reporting

Generate accuracy report:

```markdown
# Website Analysis Accuracy Report

## Summary
- Overall Accuracy: 85%
- Structure Detection: 90%
- Color Extraction: 95%
- Feature Detection: 75%
- Component Style: 80%

## Per-Site Results

### linear.app
| Component | Expected | Detected | ✓/✗ |
|-----------|----------|----------|-----|
| Hero type | split | split | ✓ |
| Primary color | #5E6AD2 | #5E6BD3 | ✓ |
| Has auth | true | true | ✓ |
| Button style | pill | rounded | ✗ |

### allbirds.com
...
```

---

## Files to Create

1. `tests/analysis/accuracy.test.ts`
2. `tests/analysis/test-cases.json`
3. `scripts/generate-accuracy-report.ts`

---

## Success Criteria

- [ ] All test cases run successfully
- [ ] Structure detection > 85% accurate
- [ ] Color extraction > 90% accurate
- [ ] Feature detection > 80% accurate
- [ ] Accuracy report generated

