# Task: Map UI Features to Code Templates (P2 - Medium Priority)

Priority: P2 (Medium - enhances user value)
Agent: Template Agent
Date: 2026-01-03

## Problem

The configurator UI shows 38 selectable "features" organized into categories, but selecting them generates NO code. Users see checkboxes for features like "Shopping Cart", "User Registration", "Admin Dashboard" but the export contains none of this functionality.

From the screenshots:
- User selected 38 features across multiple categories
- UI showed "38 features" and "38 selected"
- Exported project contained 0 feature-specific code

## Objective

Create a feature template system that generates actual code when users select features in the configurator.

## Feature Categories (from Screenshots)

### User Management (3 features)
- Social Login
- Email Registration
- Guest Browsing
- Admin Dashboard

### Product Database (4 features)
- Nutritional Info
- Price Tracking
- Stock Availability
- Brand Profiles
- Product Categories

### Search & Filter (2 features)
- Full-text Search
- Advanced Filters
- Saved Searches

### E-commerce Integration (7 features)
- Shopping Cart
- Checkout Flow
- Order History
- Wishlist
- Inventory Management
- Product Variants
- Shipping Integration

### Analytics Features (6 features)
- Page Views
- User Tracking
- Conversion Funnels
- Reports
- Charts & Visualization

### Billing & Subscriptions (1 feature)
- Subscription Billing
- One-Time Payments
- Invoicing

### Enterprise Features (2 features)
- Role-Based Access Control
- Audit Logging
- Rate Limiting
- Multi-Tenancy

## Deliverables

### 1. Feature Template Structure

Create templates in:
```
packages/templates/features/{category}/{feature}/
├── files.json           # Manifest
├── components/*.tsx     # UI components
├── hooks/*.ts           # React hooks
├── lib/*.ts             # Utilities
└── app/**/*.tsx         # Pages/routes
```

### 2. Priority Features to Implement

**Tier 1 - E-commerce Essentials** (most requested)
| Feature | Files to Generate |
|---------|-------------------|
| Shopping Cart | `components/cart/`, `hooks/useCart.ts`, `lib/cart.ts` |
| Checkout Flow | `app/checkout/`, `components/checkout/` |
| Product Listing | `app/products/`, `components/products/` |
| Wishlist | `components/wishlist/`, `hooks/useWishlist.ts` |

**Tier 2 - User Features**
| Feature | Files to Generate |
|---------|-------------------|
| User Registration | `app/register/`, `components/auth/RegisterForm.tsx` |
| User Profile | `app/profile/`, `components/profile/` |
| Admin Dashboard | `app/admin/`, `components/admin/` |

**Tier 3 - Data Features**
| Feature | Files to Generate |
|---------|-------------------|
| Search | `components/search/`, `hooks/useSearch.ts` |
| Filters | `components/filters/`, `hooks/useFilters.ts` |
| Data Tables | `components/tables/DataTable.tsx` |

### 3. Feature Manifest Schema

Create `packages/templates/features/types.ts`:
```typescript
interface FeatureManifest {
  id: string;
  name: string;
  category: string;
  description: string;
  files: FileEntry[];
  dependencies?: string[];
  requiredIntegrations?: string[];
  envVars?: string[];
}
```

### 4. Feature Loader

Create `website/lib/generator/feature-loader.ts`:
- Load feature manifests
- Resolve dependencies between features
- Merge with integration files

### 5. Update Generator

Update `website/lib/generator/index.ts`:
- Accept `features` array in config
- Load and merge feature templates
- Handle feature-integration dependencies (e.g., Shopping Cart needs Stripe)

### 6. Update Configurator State

Update `website/lib/configurator-state.ts`:
- Ensure selected features are passed to generator
- Map UI feature names to template IDs

## Implementation Example: Shopping Cart

```
packages/templates/features/ecommerce/shopping-cart/
├── files.json
├── components/
│   ├── Cart.tsx
│   ├── CartItem.tsx
│   ├── CartSummary.tsx
│   └── AddToCartButton.tsx
├── hooks/
│   └── useCart.ts
├── lib/
│   └── cart-utils.ts
└── app/
    └── cart/
        └── page.tsx
```

`files.json`:
```json
{
  "id": "shopping-cart",
  "name": "Shopping Cart",
  "category": "ecommerce",
  "files": [
    { "source": "components/Cart.tsx", "target": "components/cart/Cart.tsx" },
    { "source": "hooks/useCart.ts", "target": "hooks/useCart.ts" },
    { "source": "app/cart/page.tsx", "target": "app/cart/page.tsx" }
  ],
  "dependencies": ["zustand"],
  "requiredIntegrations": []
}
```

## Test Criteria

1. [ ] Feature template structure defined
2. [ ] At least 5 Tier 1 features implemented
3. [ ] Feature loader created and working
4. [ ] Generator accepts and processes features
5. [ ] Export with features includes correct files
6. [ ] Generated project builds with features

## Reference

- Screenshots showing feature selection (Screenshots 4-5)
- Configurator state: `website/lib/configurator-state.ts`
- Generator: `website/lib/generator/`
- Report: `output/agents/quality/workspace/export-analysis-testprojectnew03.md`

## Estimated Effort

| Task | Time |
|------|------|
| Feature manifest schema | 30 min |
| Feature loader | 1 hour |
| Shopping Cart feature | 2 hours |
| Checkout Flow feature | 2 hours |
| Product Listing feature | 1.5 hours |
| Wishlist feature | 1 hour |
| User Registration feature | 1 hour |
| Admin Dashboard feature | 2 hours |
| Generator integration | 1 hour |
| Testing | 1 hour |
| **Total** | ~13 hours |

---

*Template Agent - Execute this task to deliver feature code generation*

