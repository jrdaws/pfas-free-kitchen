# Task: Test Supabase OAuth E2E

Priority: P2
Assigned To: Testing Agent
Depends On: T3 (Connected Services UI) - wait until UI is complete
Estimated Effort: Medium (1 hour)
Quality Score: 7.2/10

## Context
Supabase OAuth integration was completed in Cycle 10. Need to validate the full flow works end-to-end with real user interaction.

## Objectives
1. Create E2E test for Supabase OAuth flow
2. Test connect flow (redirect, callback, token storage)
3. Test disconnect flow (API call, UI update)
4. Document any issues found

## Success Criteria
- [ ] Playwright test for OAuth flow created
- [ ] Connect flow redirects to Supabase correctly
- [ ] Callback processes token and updates UI
- [ ] Disconnect removes connection from database
- [ ] Test passes or issues documented

## Files to Modify
- website/tests/supabase-oauth.spec.ts (new)

## Reference Files
- src/platform/oauth-handlers.ts (OAuth callback handling)
- src/platform/connected-services.ts (connection management)
- website/components/configurator/SupabaseSetup.tsx (UI component)

## Testing Approach
1. Mock OAuth redirect for CI (can't actually hit Supabase in tests)
2. Test callback URL parsing and token handling
3. Test connection state persistence
4. Test disconnect button behavior

## Commands
```bash
cd website
npx playwright test supabase-oauth.spec.ts --project=chromium
```

## Handoff
1. Move task to done/
2. Report test results to outbox/
3. Flag any OAuth issues to Platform Agent

---
Curated by: CURATOR Agent
Cycle: 11
Date: 2025-12-25 02:00

