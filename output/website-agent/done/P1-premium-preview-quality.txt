# P1: Upgrade AI Preview to Match Production Quality

**Priority**: P1 - HIGH
**Date**: 2025-12-24
**From**: Quality Agent

---

## Problem Statement

The AI Preview step generates a primitive-looking wireframe while the rest of the 
configurator uses a polished, premium dark theme. This creates a jarring disconnect 
and makes users think the final product will look cheap.

### Visual Comparison

| Configurator UI | AI Preview (Current) |
|-----------------|---------------------|
| Dark theme (#0A0A0A) | Light background |
| Indigo/Violet accents (#6366F1) | Cyan/teal borders |
| Polished shadcn/ui cards | Basic HTML boxes |
| Professional typography | Plain text |
| Subtle, refined borders | Thick wireframe borders |
| Premium SaaS aesthetic | Student project aesthetic |

---

## Root Cause Analysis

The AI Preview is likely:
1. Generating raw HTML/React without access to design tokens
2. Not using the same Tailwind config as the final export
3. Not applying shadcn/ui components
4. Missing dark theme context
5. Using a generic "code generation" prompt without style guidance

---

## Solution Architecture

### Option A: Design Token Injection (Recommended)

Pass your design system to the AI generation prompt:

```typescript
const previewPrompt = `
Generate a React component for an e-commerce homepage.

CRITICAL: Use these EXACT design tokens:

Colors:
- Background: bg-[#0A0A0A]
- Foreground: text-[#EDEDED]
- Primary: text-indigo-500 (#6366F1)
- Primary hover: hover:text-violet-500 (#8B5CF6)
- Muted: text-gray-400 (#A1A1AA)
- Border: border-[#333333]
- Card: bg-[#171717]

Typography:
- Headings: font-bold text-white
- Body: text-gray-300
- Small: text-sm text-gray-400

Components (use these patterns):
- Cards: bg-[#171717] border border-[#333333] rounded-lg p-6
- Buttons: bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md
- Inputs: bg-[#1E1E1E] border border-[#333333] text-white rounded-md

Layout:
- Dark theme ONLY
- Container: max-w-7xl mx-auto px-4
- Spacing: Use consistent py-12, py-24 for sections
`;
```

### Option B: Pre-built Preview Components

Instead of AI generating from scratch, use **pre-designed preview templates**:

```
website/components/preview/
├── templates/
│   ├── EcommercePreview.tsx    # Full e-commerce layout
│   ├── SaasPreview.tsx         # SaaS landing page
│   ├── BlogPreview.tsx         # Blog layout
│   └── DashboardPreview.tsx    # Admin dashboard
├── sections/
│   ├── HeroPreview.tsx
│   ├── FeaturesPreview.tsx
│   ├── PricingPreview.tsx
│   ├── ProductGridPreview.tsx
│   └── FooterPreview.tsx
└── PreviewRenderer.tsx         # Composes based on config
```

The AI would then **customize** these components (change text, add products) rather 
than generating the entire UI from scratch.

### Option C: Live Template Preview

Render the ACTUAL template components with user configuration applied:

```typescript
// Instead of AI-generated HTML, render real components
function LivePreview({ config }: { config: ConfigState }) {
  const Template = templates[config.template]; // e.g., EcommerceTemplate
  
  return (
    <div className="preview-frame bg-[#0A0A0A]">
      <Template
        projectName={config.projectName}
        integrations={config.integrations}
        inspiration={config.inspiration}
        // Real components, real styling
      />
    </div>
  );
}
```

---

## Implementation Steps

### Step 1: Create Preview Design System

Create a dedicated preview stylesheet that mirrors production:

```css
/* website/app/components/preview/preview.css */

.preview-frame {
  background: #0A0A0A;
  color: #EDEDED;
  font-family: var(--font-sans);
}

.preview-card {
  background: #171717;
  border: 1px solid #333333;
  border-radius: 0.5rem;
  padding: 1.5rem;
}

.preview-button-primary {
  background: #6366F1;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
}

.preview-button-primary:hover {
  background: #8B5CF6;
}

/* Remove ALL cyan/teal colors */
.preview-frame * {
  border-color: #333333 !important; /* Override any default cyan */
}
```

### Step 2: Update AI Generation Prompt

If using AI to generate preview code, update the system prompt:

```typescript
const PREVIEW_SYSTEM_PROMPT = `
You are generating a preview for a premium SaaS product configurator.

MANDATORY STYLING RULES:
1. ALWAYS use dark theme (bg-gray-950 or #0A0A0A)
2. NEVER use cyan, teal, or bright borders
3. Primary accent: Indigo (#6366F1)
4. Secondary accent: Violet (#8B5CF6)
5. Success: Emerald (#10B981) - ONLY for checkmarks/success states
6. Text: White for headings, gray-300 for body, gray-500 for muted
7. Cards: Dark background (#171717), subtle border (#333333)
8. Buttons: Indigo background, white text, rounded-md
9. Overall aesthetic: Premium, modern, Vercel/Linear inspired

NEVER generate:
- Light themes
- Bright colored borders
- Basic HTML without Tailwind classes
- Wireframe-style layouts
`;
```

### Step 3: Preview Frame Styling

Update the preview iframe/container:

```tsx
// website/app/components/configurator/PreviewFrame.tsx

export function PreviewFrame({ children }: { children: React.ReactNode }) {
  return (
    <div className="preview-container rounded-lg overflow-hidden border border-gray-800">
      {/* macOS window chrome */}
      <div className="flex items-center gap-2 px-4 py-3 bg-gray-900 border-b border-gray-800">
        <div className="flex gap-1.5">
          <div className="w-3 h-3 rounded-full bg-red-500" />
          <div className="w-3 h-3 rounded-full bg-yellow-500" />
          <div className="w-3 h-3 rounded-full bg-green-500" />
        </div>
        <span className="text-xs text-gray-400 ml-2">Preview - Desktop View</span>
      </div>
      
      {/* Preview content - force dark theme */}
      <div className="bg-[#0A0A0A] min-h-[500px] overflow-auto">
        {children}
      </div>
    </div>
  );
}
```

### Step 4: Create Template-Specific Preview Components

For E-commerce specifically:

```tsx
// website/components/preview/templates/EcommercePreview.tsx

export function EcommercePreview({ 
  projectName,
  products = defaultProducts 
}: EcommercePreviewProps) {
  return (
    <div className="min-h-screen bg-[#0A0A0A] text-white">
      {/* Navigation */}
      <nav className="border-b border-gray-800 px-6 py-4">
        <div className="max-w-7xl mx-auto flex justify-between items-center">
          <span className="text-xl font-bold text-indigo-500">{projectName}</span>
          <div className="flex gap-6 text-gray-300">
            <a href="#" className="hover:text-white">Products</a>
            <a href="#" className="hover:text-white">Categories</a>
            <a href="#" className="hover:text-white">Cart</a>
          </div>
          <div className="flex gap-3">
            <button className="text-gray-300 hover:text-white">Login</button>
            <button className="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-md">
              Sign Up
            </button>
          </div>
        </div>
      </nav>

      {/* Hero */}
      <section className="py-24 px-6">
        <div className="max-w-4xl mx-auto text-center">
          <h1 className="text-5xl font-bold mb-6">
            Welcome to <span className="text-indigo-500">{projectName}</span>
          </h1>
          <p className="text-xl text-gray-400 mb-8">
            Discover our curated collection of premium products.
          </p>
          <button className="bg-indigo-600 hover:bg-indigo-700 px-8 py-3 rounded-md text-lg">
            Shop Now
          </button>
        </div>
      </section>

      {/* Products Grid */}
      <section className="py-16 px-6">
        <div className="max-w-7xl mx-auto">
          <h2 className="text-3xl font-bold mb-8">Featured Products</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {products.map((product, i) => (
              <div 
                key={i}
                className="bg-[#171717] border border-gray-800 rounded-lg overflow-hidden hover:border-indigo-500/50 transition-colors"
              >
                <div className="aspect-square bg-gray-900 flex items-center justify-center">
                  <span className="text-gray-600">Product Image</span>
                </div>
                <div className="p-4">
                  <h3 className="font-semibold text-white">{product.name}</h3>
                  <p className="text-indigo-400 mt-1">${product.price}</p>
                  <button className="w-full mt-4 bg-indigo-600 hover:bg-indigo-700 py-2 rounded-md">
                    Add to Cart
                  </button>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
    </div>
  );
}
```

---

## Before & After Comparison

### Before (Current - Primitive)
```
┌────────────────────────────────────────────┐
│  [Logo]                    [Nav] [Nav]     │  <- Plain text
├────────────────────────────────────────────┤
│  ┌──────────────────────────────────────┐  │
│  │  Welcome to Project              ●●● │  │  <- Cyan/teal border
│  │  Some basic text here                │  │
│  │            [Shop Now]                │  │  <- Basic button
│  └──────────────────────────────────────┘  │
│                                            │
│  ┌────────┐ ┌────────┐ ┌────────┐         │  <- Wireframe cards
│  │Product1│ │Product2│ │Product3│         │
│  │ $49.99 │ │ $29.99 │ │ $79.99 │         │
│  │[Add]   │ │[Add]   │ │[Add]   │         │
│  └────────┘ └────────┘ └────────┘         │
└────────────────────────────────────────────┘
Light background, bright borders, basic styling
```

### After (Premium - Matching Configurator)
```
┌────────────────────────────────────────────┐
│  Logo                    Products  Cart    │  <- Clean nav
│  ══════════════════════════════════════════│  <- Subtle border
│                                            │
│      Welcome to YourProject                │  <- Large, bold
│      Discover our curated collection       │  <- Gray subtext
│                                            │
│           ╔══════════════╗                 │  <- Indigo button
│           ║   Shop Now   ║                 │
│           ╚══════════════╝                 │
│                                            │
│  ┌──────────────┐ ┌──────────────┐        │  <- Dark cards
│  │   ░░░░░░░░   │ │   ░░░░░░░░   │        │  <- Subtle border
│  │   Product 1  │ │   Product 2  │        │
│  │   $49.99     │ │   $29.99     │        │  <- Indigo price
│  │ [Add to Cart]│ │ [Add to Cart]│        │  <- Full-width button
│  └──────────────┘ └──────────────┘        │
└────────────────────────────────────────────┘
Dark background (#0A0A0A), indigo accents, premium feel
```

---

## Acceptance Criteria

- [ ] Preview uses dark theme matching configurator (#0A0A0A background)
- [ ] Accent colors are Indigo/Violet, NOT cyan/teal
- [ ] Cards have subtle borders (#333333), not bright wireframe borders
- [ ] Typography matches production (proper hierarchy, weights)
- [ ] Preview feels like a premium product, not a wireframe
- [ ] Each template (E-commerce, SaaS, Blog) has polished preview components
- [ ] AI generation prompt enforces design system

---

## Files to Modify

1. `website/app/components/configurator/PreviewStep.tsx` - Main preview step
2. `website/components/preview/` - Create preview component library
3. `website/lib/ai/preview-prompt.ts` - Update AI generation prompt
4. `website/app/preview.css` or equivalent - Preview-specific styles

---

## Priority Rationale

This is P1 because:
- First impression matters - primitive preview undermines confidence
- Users might think this is what they're paying for
- The gap between configurator quality and preview quality is jarring
- Easy win with high visual impact

---

*P1 UX Improvement | Quality Agent → Website Agent | 2025-12-24*

